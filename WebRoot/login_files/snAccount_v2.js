var account=account||{};account.tabChange=function(a,b){var c=$(a).find("li");c.click(function(){var d=$(this).index();$(this).addClass("selected").siblings().removeClass("selected");$(b).eq(d).show().siblings(b).hide();$(".email-list").addClass("hide")})};account.changeTextBorder=function(){var b=$(".ui-text");b.bind("focus",function(){$(this).addClass("ui-text-focus");$(this).parent("dd").addClass("dd-focus")});$(".default-name").bind("click",function(){$(this).siblings("input").addClass("ui-text-focus").focus();$(this).parent("dd").addClass("dd-focus")});var a=$(".user-name").find(".ui-text");if(a.val()!=""){$(".user-name .ui-text").parents("dl").addClass("hide-def-name")}a.bind("blur",function(){if($(this).val()==""){$(this).parent().parent().removeClass("hide-def-name")}});b.bind("blur",function(){$(this).removeClass("ui-text-focus");$(this).parent("dd").removeClass("dd-focus")});a.bind("keydown",function(){var c=$(".acc-form").find(".user-name");if($("this").val()!=""){c.addClass("hide-def-name")}else{c.removeClass("hide-def-name")}})};account.iptWordsAct=function(b,d){var a=d.defaultValue,c=$(d).val();if(b=="focus"){if(c==a){$(d).val("").css("color","#333")}}if(b=="blur"){if(c==""){$(d).val(a).css("color","#999")}}};account.changeRegType=function(){var a=$(".reg-type");var b=a.find("input");b.each(function(){if(this.checked){var c=$(this).parent("span").index();var d=$(this).parents(".tab-cont").find(".acc-form");d.eq(c).show().siblings(".acc-form").hide()}});b.change(function(){var c=$(this).parent("span").index();var d=$(this).parents(".tab-cont").find(".acc-form");d.eq(c).show().siblings(".acc-form").hide()})};account.getCheck=function(){var e=$(".msg-check .b3");var d=e.siblings(".tip-ok-wrap");var f;var a=1;var c=3;function b(){if(a>3){c=-1;e.unbind("click",b);clearInterval(f);e.html("<span>重新发送验证码</span>");e.addClass("noActive");d.removeClass("hide");d.html('<span class="tip-ok-wrap ml10">您当日累计获取验证码已达到3次，请您次日再试!</span>');return false}d.removeClass("hide");e.addClass("noActive");e.html("<span>"+c+"秒后重新获取</span>");f=setInterval(function(){if(c>0){c--;e.html("<span>"+c+"秒后重新获取</span>");e.addClass("noActive");e.unbind("click",b)}else{c=3;clearInterval(f);e.html("<span>获取短信验证码</span>");e.removeClass("noActive");e.bind("click",b)}},1000);a++;return false}e.bind("click",b)};account.winAct=function(a,k){var e=!-[1,]&&!window.XMLHttpRequest,g=$("#"+a.id),c=$("#winWrapper"),i=c.find("#winBox"),j=c.find(".maskIfm"),d=a.isFix||true,h=g.html(),f=g.height()<=0?150:g.height();i.html(h);winActResize(d,g,c,e);if(j){j.css({height:f+"px"}).show()}if(a.isOpen){c.show()}else{c.hide()}if(k){k.apply(this,[a.id])}var b=$(".screen-iframe");a.isIframe?b.css({width:"100%",height:$(document).height()+"px",opacity:0.3,backgroundColor:"#000"}).show():b.css({width:0,height:0}).hide();window.onresize=function(){winActResize(d,g,c,e)}};var winActResize=function(f,i,a,g){var e=i.width(),k=i.height(),c=$(window).height(),b=$(document).width(),d=$(document).scrollTop(),h=k<=0?150:k,j=Math.max(0,(c-h)/2);a.css({top:j+"px",left:(b-e)/2});if(f){a.css({top:j+"px"});a.css("position",g?"absolute":"fixed");g&&$(window).scroll(function(){var l=Math.max(0,(c-h)/2);a.css({top:d+l,left:(b-e)/2})})}};account.autoFill=function(a,c){var f=!1,g=c,e=$(a),b=e.find(".ui-text"),d="";$(document).click(function(i){var h=$(i.target);if(h.hasClass("ui-text")){i.stopPropagation()}else{f&&f.hide()}});b[0]&&b.val()!=b[0].defaultValue&&b.val(b[0].defaultValue).css("color","#999");b.focus(function(){var j=$(this),i=j.val();f=j.siblings(".email-list");$.trim(j.val()).length&&j.change();if(i.length<25&&i.length>1){/[\u4E00-\u9FA5]/i.test(i)||f.show()}var h=j.parents("dl").siblings("dl").find(".email-list");h&&h.hide()}).keyup(function(m){var j=$(this),p=m.keyCode,o=j.val(),n=f.find("li.hover"),k=f.find("li").size(),i=!1,h=!1,l={down:function(s,r){var q=n.index()>k-2;if(q){i=f.find("li").first();i.addClass("hover").siblings("li").removeClass("hover")}if(n.index()>=0){i=n.next();n.removeClass("hover").next().addClass("hover");d=i.html()}else{i=f.find("li").first();i.addClass("hover").siblings("li").removeClass("hover");n=i;d=i.html()}},up:function(r,q){if(n.index()>0){h=n.prev();n.removeClass("hover").prev().addClass("hover");d=h.html()}else{h=f.find("li").last();h.addClass("hover").siblings("li").removeClass("hover");d=h.html()}},enter:function(s,r){s.preventDefault();if(d.length){r.val(d)}var u=r.attr("id");var q=setTimeout(function(){f.hide();f.html("");r.blur();d="";clearTimeout(q)},1);return}};j.keydown();if(p==40){l.down(m,j)}else{if(p==38){l.up(m,j)}else{if(p==13){l.enter(m,j)}else{b.change()}}}}).keydown(function(j){if(j.keyCode==32){j.preventDefault();return}var i=$(this),h=i.val();if(h.length>25||h.length<1){f&&f.hide()&&f.html("");return}}).change(function(m){var l=$(this),k=l.val();if(k.length>25||k.length<1){return}if(/[\u4E00-\u9FA5]/i.test(k)){f.hide()&&f.html("");return}if(k.indexOf("@")<0){k+="@"}var n=k.substring(k.indexOf("@"),0),j=k.substring(k.indexOf("@")),h=["sina.com","qq.com","163.com","126.com","sohu.com","hotmail.com","gmail.com","139.com","foxmail.com","189.cn"],i="";if(g==2){if(l.val().indexOf("@")>0){i="<ol><li title="+k+">"+k.substring(0,k.length)+"</li>\n"}else{i="<ol><li title="+k+">"+k.substring(0,k.length-1)+"</li>\n"}}else{i="<h6>请选择邮箱类型</h6>\n<ol>"}$.each(h,function(o,p){i+="<li title="+n+"@"+p+">"+n+"@"+p+"</li>\n"});i+='</ol>\n<!--[if lt IE 7]><iframe frameborder="0" scrolling="0" src=""></iframe><![endif]-->\n';f.html(i).children("iframe").width(f.width()).height(f.height());f.removeClass("hide").show(0,function(){f.find("li").bind("mouseover mouseout mousedown",function(o){if(o.type=="mouseover"){$(this).addClass("hover").siblings("li").removeClass("hover")}if(o.type=="mousedown"){l.val(this.innerHTML);l.blur();f.hide();f.html("");var p=l.attr("id")}})})})};function filterCampusName(d){var c=new Array();var b=new Array();for(var f=0;f<campusNameList.length;f++){var e=campusNameList[f].name;var a=e.indexOf(d);if(a==0){c.push(e)}else{if(a>0){b.push(e)}}}return c.concat(b)}function campusAutoFill(a){var f=!1,e=$(a).find(".auto-campus"),d=e.find(".ui-text"),c="",b={};b.cache=null;b.func=function(){b.cache=f.parents(".reg-campus").nextAll().find("select")};$(document).click(function(h){var g=$(h.target);if(g.parents().hasClass("auto-campus")){h.stopPropagation()}else{f&&f.hide()}});d.focus(function(){var h=$(this),g=h.val();if(!f){f=h.siblings(".campus-list");(!window.XMLHttpRequest)&&b.func()}$.trim(h.val()).length&&h.change()}).keyup(function(k){var j=$(this),h=k.keyCode,i=j.val(),g=f.find("li").size(),l={down:function(p,o){var n=f.find(".hover");var m=n.index()>g-2;if(m){next=f.find("li").first();next.addClass("hover").siblings("li").removeClass("hover")}else{n.removeClass("hover").next().addClass("hover")}c=f.find(".hover").html()},up:function(o,n){var m=f.find(".hover");if(m.index()>0){m.removeClass("hover").prev().addClass("hover")}else{prev=f.find("li").last();prev.addClass("hover").siblings("li").removeClass("hover")}c=f.find(".hover").html()},enter:function(o,n){o.preventDefault();if(c.length){n.val(c)}var m=setTimeout(function(){f.hide();n.blur();c="";clearTimeout(m)},1);return}};if(i.length<1){f&&f.hide();return}if(h==40){l.down(k,j)}else{if(h==38){l.up(k,j)}else{if(h==13){l.enter(k,j)}else{d.change()}}}}).change(function(k){var j=$(this),i=j.val();if(i.length<1){return}var g=filterCampusName(i);if(g.length){var h="<ol>";$.each(g,function(l,m){if(l==0){h+="<li class='hover' title="+m+">"+m+"</li>\n"}else{h+="<li title="+m+">"+m+"</li>\n"}j.data("item",l)});h+='</ol>\n<!--[if lt IE 7]><iframe frameborder="0" scrolling="0" src=""></iframe><![endif]-->\n';(j.data("item")>>>0)>=10?f.addClass("max-height"):f.removeClass("max-height");f.html(h).children("iframe").width(f.width()).height(f.height());f.removeClass("hide").show(0,function(){f.find("li").bind("mouseover mouseout mousedown",function(l){if(l.type=="mouseover"){$(this).addClass("hover").siblings("li").removeClass("hover")}if(l.type=="mousedown"){j.val(this.innerHTML);(!window.XMLHttpRequest)&&b.cache.css("visibility","visible");f.hide();j.blur()}})})}})}function iptWordsAct(b,d){var a=d.defaultValue,c=$(d).val();if(b=="focus"){if(c==a){$(d).val("").css("color","#333")}}if(b=="blur"){if(c==""){$(d).val(a).css("color","#999")}}}account.changeLoginTextBorder=function(){var a=$(".entry .text");var b=$(".login-name");if(b.val()!=""){$(this).parent().addClass("hide-label")}a.bind("focus",function(){$(this).hasClass("login-name")&&$(this).parent("dd").addClass("dd-focus");$(this).addClass("focus")});a.bind("blur",function(){$(this).removeClass("focus");if($(this).hasClass("login-name")){$(this).parent("dd").removeClass("dd-focus");if($(this).val()==""){$(this).parent().removeClass("hide-label")}}});b.bind("keydown",function(){if($("this").val()!=""){$(this).parent("dd").addClass("hide-label")}else{$(this).parent("dd").removeClass("hide-def-name")}})};$(document).ready(function(){account.changeTextBorder();account.changeLoginTextBorder();account.changeRegType();account.tabChange("#tabWrap",".tab-cont");account.autoFill("#normalReg_form .auto-person",2);account.autoFill("#normalReg_form .auto-email",1);account.autoFill("#campusReg_form .auto-person",2);account.autoFill("#campusReg_form .auto-email",1);account.autoFill("#userReg_form .auto-person",2);account.autoFill("#userReg_form .auto-email",1);campusAutoFill(".campus-reg");$("#normalReg_logonName,#normalReg_email,#campusReg_logonName,#campusReg_email").parents("dl").next("dl").find("a,select,input").focus(function(){$(".email-list").css("display","none")});$("#campusReg_collegeName").parents("dl").siblings("dl").find("a,select,input").focus(function(){$(".campus-list").css("display","none")});$("#setpass").keyup(function(){($(this).val().length>0)&&$("#qrmm").removeAttr("disabled").removeClass("ui-text-disabled")});$(document).keypress(function(a){});initImageVerifyNecessity()});var gImageVerifyNecessityByLogonIP=true;var gImageVerifyNecessityByLogonUser=false;function initImageVerifyNecessity(){ajaxCheckImageVerifyNecessityByLogonIP();onCheckImageVerifyNecessity();$("#email2").blur(onCheckImageVerifyNecessity)}function onCheckImageVerifyNecessity(){var a=$("#email2").val();if(a.length>0){ajaxCheckImageVerifyNecessityByLogonUser(a)}if(gImageVerifyNecessityByLogonIP||gImageVerifyNecessityByLogonUser){$("#imageVerifyArea").show()}else{$("#imageVerifyArea").hide()}}function ajaxCheckImageVerifyNecessityByLogonIP(){var a=true;$.ajax({url:"AjaxCheckImageVerifyNecessityCmd",type:"POST",async:false,cache:false,data:{scenario:"checkByLogonIP"},dataType:"json",success:function(b){if(b!=null&&b.result){a=true}else{a=false}}});gImageVerifyNecessityByLogonIP=a;return a}function ajaxCheckImageVerifyNecessityByLogonUser(b){var a=true;$.ajax({url:"AjaxCheckImageVerifyNecessityCmd",type:"POST",async:false,cache:false,data:{scenario:"checkByLogonName",logonName:b},dataType:"json",success:function(c){if(c!=null&&c.result){a=true}else{a=false}}});gImageVerifyNecessityByLogonUser=a;return a};